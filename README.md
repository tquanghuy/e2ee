# e2ee

> [!IMPORTANT]
> **Disclaimer**: This repository was fully generated by an Artificial Intelligence. While it implements standard cryptographic primitives, it has not been audited by human security experts. Use with caution in production environments.

[![Go Reference](https://pkg.go.dev/badge/github.com/tquanghuy/e2ee.svg)](https://pkg.go.dev/github.com/tquanghuy/e2ee)
[![Go](https://github.com/tquanghuy/e2ee/actions/workflows/go.yml/badge.svg)](https://github.com/tquanghuy/e2ee/actions/workflows/go.yml)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

`e2ee` is a Go SDK that provides simple, secure primitives for building End-to-End Encryption applications. It is designed to be easy to use and hard to misuse, employing modern cryptographic standards.

## Features

- **Key Management (`keys`)**:
    - **Identity Keys (Ed25519)**: Long-term keys for digital signatures and user identity.
    - **Exchange Keys (X25519)**: Keys used for ECDH key exchange and encryption.
- **Authenticated Encryption (`box`)**:
    - **Sign-then-Encrypt**: Messages are signed with the sender's Identity Key and then encrypted.
    - **XChaCha20-Poly1305**: Robust authenticated encryption with random nonces.
    - **Forward Secrecy**: Uses ephemeral keys for each message.
- **Digital Signatures (`box`)**:
    - **Ed25519** signing and verification.

## Installation

```bash
go get github.com/tquanghuy/e2ee
```

## Usage

### Key Generation

```go
package main

import (
	"fmt"
	"github.com/tquanghuy/e2ee/keys"
)

func main() {
	// Generate a new Identity and Exchange keypair
	alice, err := keys.Generate()
	if err != nil {
		panic(err)
	}
	fmt.Println("Alice's keys generated successfully")
}
```

### Key Persistence

You can save and load keys using standard PEM encoding:

```go
// Save keys to disk
err := alice.Save("alice.pem")

// Load keys from disk
aliceLoaded, err := keys.Load("alice.pem")
```

### Authenticated Encryption

```go
package main

import (
	"fmt"
	"github.com/tquanghuy/e2ee/box"
	"github.com/tquanghuy/e2ee/keys"
)

func main() {
	alice, _ := keys.Generate()
	bob, _ := keys.Generate()

	// Alice encrypts a message for Bob, signing it with her Identity Key
	message := []byte("Hello Bob, this is a secret message!")
	ciphertext, _ := box.Encrypt(message, bob.ExchangePub, alice.IdentityPriv)

	// Bob decrypts the message and verifies it came from Alice
	plaintext, _ := box.Decrypt(ciphertext, bob.ExchangePriv, alice.IdentityPub)
	fmt.Printf("Decrypted: %s\n", plaintext)
}
```

### Signing and Verification

```go
package main

import (
	"fmt"
	"github.com/tquanghuy/e2ee/box"
	"github.com/tquanghuy/e2ee/keys"
)

func main() {
	alice, _ := keys.Generate()

	message := []byte("I authorize this transaction")
	signature := box.Sign(message, alice.IdentityPriv)

	valid := box.Verify(message, signature, alice.IdentityPub)
	fmt.Printf("Signature valid: %v\n", valid)
}
```

## Examples

See the [examples/](examples/) directory for more complete usage scenarios.

- [Simple Chat](examples/simple-chat/main.go): A basic demonstration of key generation, encryption, and signing.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
